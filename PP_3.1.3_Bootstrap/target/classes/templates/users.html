<!DOCTYPE html>
<html lang="en" xmlns:text-align="http://www.w3.org/1999/xhtml">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Users</title>
    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">
    <link href="/css/libs/bootstrap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
<!---------------------------------------------------- admin panel ---------------------------------------------------->
<div class="container-fluid">
    <div class="row" style="background-color: #282828 ;padding: 10px">
        <div class="col-md-11">
            <h4 class="text-left" style="color:white" th:object="${checkingUser}">
                <b th:utext="${checkingUser.username}"></b>
                <span style="font-family: sans-serif">with roles:</span>
                <span th:utext="${checkingUser.getRolesToString()}" style="font-family: sans-serif"></span>
            </h4>
        </div>
        <div class="col-md-1">
            <form th:action="@{/logout}" method="post">
                <button class="btn btn-link" style="color:gray" type="submit">Logout</button>
            </form>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2">
            <ul class="nav flex-column nav-pills" id="pills-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="pills-admin-tab" data-toggle="pill" href="#admin-pill" role="tab" aria-controls="pills-admin" aria-selected="true">Admin</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="pills-user-tab" data-toggle="pill" href="#user-pill" role="tab" aria-controls="pills-user" aria-selected="false">User</a>
                </li>
            </ul>
        </div>
        <div class="col-md-10">
            <div class="tab-content">
                <div class="tab-pane active" id="admin-pill" role="tabpanel" aria-labelledby="pills-admin-tab">
                    <h3>Admin panel</h3>
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#userTable" role="tab" aria-controls="home" aria-selected="true">List of users</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#addNewUser" id="profile-tab" data-toggle="tab" role="tab" aria-controls="profile" aria-selected="false">New user</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="userTable" role="tabpanel" aria-labelledby="home-tab">
                            <table class="table table-striped" style="background-color:white" width="100%">
                                <thead class="table-active">
                                    <th class="hatTable">Users table</th>
                                </thead>
                                <tbody>
                                    <tr class="rowTable2">
                                        <td colspan="4">
                                            <table style="background-color:white;" width="100%">
                                                <thead style="background-color:white">
                                                    <tr style="background-color:white">
                                                        <td><b><p align="center">ID</p></b></td>
                                                        <td><b><p align="center">First name</p></b></td>
                                                        <td><b><p align="center">Last name</p></b></td>
                                                        <td><b><p align="center">Age</p> </b></td>
                                                        <td><b><p align="center">Email</p></b></td>
                                                        <td><b><p align="center">Role</p></b></td>
                                                        <td><b><p align="center">Edit</p></b></td>
                                                        <td><b><p align="center">Delete</p></b></td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <th:block th:each="user : ${users}">
                                                        <tr class="rowTable">
                                                            <td th:utext="${user.getId()}" align="center"></td>
                                                            <td th:utext="${user.getName()}" align="center"></td>
                                                            <td th:utext="${user.getSurname()}" align="center"></td>
                                                            <td th:utext="${user.getAge()}" align="center"></td>
                                                            <td th:utext="${user.getUsername()}" align="center"></td>
                                                            <td th:text="${user.getRolesToString()}" align="center"></td>
                                                            <td><a class="btnEdite btn-info" id="editeButton" th:href="@{/admin/get_user/(id=${user.id})}" align="center">Edit</a></td>
                                                            <td><a class="btnDelete btn-danger" id="deleteButton" th:href="@{/admin/get_user/(id=${user.id})}" align="center">Delete</a></td>
                                                        </tr>
                                                    </th:block>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="tab-pane" id="addNewUser" role="tabpanel" aria-labelledby="profile-tab">
                            <table class="table table-striped" width="100%">
                                <thead class="table-active">
                                    <th class="hatTable">Add new user</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="2">
                                            <div class="d-flex justify-content-center">
                                                <form th:method="POST" th:action="@{/admin/users}" th:object="${newUser}">
                                                    <h5 class="text-center" style="color:black">First name</h5>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" id="userFirstName.add" style="width:350px;" th:field="*{name}" placeholder="Name">
                                                    </div>
                                                    <h5 class="text-center" style="color:black">Last name</h5>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" id="userLastName.add" th:field="*{surname}" placeholder="Surname">
                                                    </div>
                                                    <h5 class="text-center" style="color:black">Age</h5>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" id="userAge.add" th:field="*{age}" placeholder="Age">
                                                    </div>
                                                    <h5 class="text-center" style="color:black">Email</h5>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control" id="userEmail.add" th:field="*{username}" placeholder="Username">
                                                    </div>
                                                    <h5 class="text-center" style="color:black">Password</h5>
                                                    <div class="form-group">
                                                        <input type="password" class="form-control" id="userPassword.add" th:field="*{password}" placeholder="Password" >
                                                    </div>
                                                    <h5 class="text-center" style="color:black">Role</h5>
                                                    <select id="roleAdd" name="roleAdd" class="form-select" multiple size="2" aria-label="multiple select example" style="width:350px;" required>
                                                        <option th:value="ADMIN" th:checked="user.roles" th:text="ADMIN"></option>
                                                        <option th:value="USER" th:checked="user.roles" th:text="USER"></option>
                                                    </select>
                                                    <div class="d-flex justify-content-center">
                                                        <div class="modal-footer">
                                                            <button type="submit" class="btn btn-success">Add new user</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="user-pill" role="tabpanel" aria-labelledby="pills-user-tab">
                    <div class="col-md-10" style="height:100vh; background-color:#f8f8f8">
                        <div class="tab-content">
                            <h3>Information of user</h3>
                            <div class="tab-content" width="100%">
                                <div class="tab-pane active" id="userTableInfo" role="tabpanel" aria-labelledby="home-tab">
                                    <table class="table table-striped" style="background-color:white" width="100%">
                                        <thead class="table-active">
                                            <th class="hatTable">About user</th>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="4">
                                                    <table class="table table-striped table-hover" width="100%">
                                                        <thead style="background-color:white">
                                                            <tr style="background-color:white">
                                                                <th><p align="center">ID</p></th>
                                                                <th><p align="center">First name</p></th>
                                                                <th><p align="center">Last name</p></th>
                                                                <th><p align="center">Age</p> </th>
                                                                <th><p align="center">Email</p></th>
                                                                <th><p align="center">Role</p></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <th:block th:object="${checkingUser}">
                                                                <tr class="rowTable3">
                                                                    <td th:utext="${checkingUser.id}" align="center"></td>
                                                                    <td th:utext="${checkingUser.name}" align="center"></td>
                                                                    <td th:utext="${checkingUser.surname}" align="center"></td>
                                                                    <td th:utext="${checkingUser.age}" align="center"></td>
                                                                    <td th:utext="${checkingUser.username}" align="center"></td>
                                                                    <td th:text="${checkingUser.getRolesToString()}" align="center"></td>
                                                                </tr>
                                                            </th:block>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<!----------------------------------------------------- modal edit --------------------------------------------------->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="d-flex justify-content-center">
        <form th:method="Patch" th:action="@{/admin/update}">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel.edit">Edit user</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h5 class="text-center" style="color:black">ID</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="idEdit" name="id" readonly>
                        </div>
                        <h5 class="text-center" style="color:black">First name</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="nameEdit" name="name">
                        </div>
                        <h5 class="text-center" style="color:black">Last name</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="surnameEdit" name="surname">
                        </div>
                        <h5 class="text-center" style="color:black">Age</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="ageEdit" name="age">
                        </div>
                        <h5 class="text-center" style="color:black">Email</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="usernameEdit" name="username">
                        </div>
                        <h5 class="text-center" style="color:black">Password</h5>
                        <div class="form-group">
                            <input type="password" class="form-control" id="passwordEdit" name="password">
                        </div>
                        <h5 class="text-center" style="color:black">Role</h5>
                        <select id="roleAdmin" name="roleAdmin" class="form-select" multiple size="2" aria-label="multiple select example" style="width:350px;" required>
                            <option th:value="ADMIN" th:checked="user.roles" th:text="ADMIN"></option>
                            <option th:value="USER" th:checked="user.roles" th:text="USER"></option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-active" data-dismiss="modal">Close</button>
                        <button type="submit" value="Save" class="btn btn-primary">Edit</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!------------------------------------------------------ modal delete ------------------------------------------------->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="d-flex justify-content-center">
        <form th:method="Delete" th:action="@{/admin/delete}">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel.delete">Delete user</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h5 class="text-center" style="color:black">ID</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="idDelete" name="id" readonly>
                        </div>
                        <h5 class="text-center" style="color:black">First name</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="nameDelete" name="name" readonly>
                        </div>
                        <h5 class="text-center" style="color:black">Last name</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="surnameDelete" name="surname" readonly>
                        </div>
                        <h5 class="text-center" style="color:black">Age</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="ageDelete" name="age" readonly>
                        </div>
                        <h5 class="text-center" style="color:black">Email</h5>
                        <div class="form-group">
                            <input type="text" class="form-control" id="usernameDelete" name="username" readonly>
                        </div>
                        <h5 class="text-center" style="color:black">Role</h5>
                        <select class="form-select" multiple size="2" aria-label="multiple select example"
                                style="width:350px;" disabled>
                            <option th:value="ADMIN" th:checked="user.roles" th:text="ADMIN"></option>
                            <option th:value="USER" th:checked="user.roles" th:text="USER"></option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-active" data-dismiss="modal">Close</button>
                        <button type="submit" value="Save" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!------------------------------------------------------ dependencies ------------------------------------------------->
<script src="/js/libs/popper.min.js"></script>
<script src="/js/libs/jquery.min.js"></script>
<script src="/js/libs/bootstrap.min.js"></script>
<script src="/js/editAndDeleteUser.js"></script>
</body>
</html>